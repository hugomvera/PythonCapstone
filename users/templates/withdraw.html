{%extends 'base.html'%} {% block content %}
<body onload="loadData('name'); loadData('balance')">
	<h2>Withdraw from Account</h2>

	<div class="row">
		<div class="col">
			<div class="card" style="width: 18rem">
				<div class="card-body">
					<h5 class="card-title" id="name"></h5>
					<p class="card-text" id="balance" value=""></p>
					<form action="./withdraw" method="POST">
						{% csrf_token %}
						<input
							type="text"
							id="output"
							name="test"
							value="balance"
							readonly
						/>
						<input type="submit" value="Submit" />
					</form>
					<a
						href="#"
						class="btn btn-primary"
						onclick="withdrawX(1);updateDisplay()"
						>Withdraw $1</a
					>
					<a
						href="#"
						class="btn btn-primary"
						onclick="DepositX(1);updateDisplay()"
						>Deposit $1</a
					>
				</div>
			</div>
			<p></p>
		</div>
	</div>

	<script>
		var balance = -1;
		function loadData(key) {
			if (key == "name") {
				document.getElementById("name").innerHTML =
					sessionStorage.getItem(key) + "'s Balance";
			} else if (key == "balance") {
				balance = sessionStorage.getItem(key);
				balance = balance.replace("$", "");
				balance = parseInt(balance);
				document.getElementById("balance").innerHTML = "$" + balance;
				output = document.getElementById("output");
				output.value = balance;
			}
		}
		function withdrawX(X) {
			balance -= X;
			document.getElementById("balance").innerHTML = "$" + balance;
		}
		function DepositX(X) {
			balance += X;
			document.getElementById("balance").innerHTML = "$" + balance;
		}
		function updateDisplay() {
			var output = document.getElementById("output");
			output.value = balance;
			console.log(output.value);
		}
	</script>
	<a href="{% url 'home' %}">Back to Home</a>
	{% endblock %}
</body>
